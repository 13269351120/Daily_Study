#### 学学学!
***
### __Linux高性能服务器开发__
#### 高性能服务器程序框架  
`引言:` 按照服务器程序的一般原理,将服务器解构为 如下三个主要模块:  
```
* I/O处理单元 介绍i/o处理单元的四种i/o模型和两种高效事件处理模式  
* 逻辑单元 可以理解为是子进程 或者 子线程 等处理逻辑任务的  介绍逻辑单元的两种高效并发模式,以及高效的逻辑处理方式 有限状态机  
* 存储单元   
```
  
#### 服务器模型  
##### C/S模型
TCP/IP协议在设计和实现上并没有客户端和服务器的概念,在通信过程中所有的机器都是`对等的`,但是由于 资源被数据提供者所垄断,大多数网络应用程序都很自然的采用了 C/S模型
`C/S模型` : 所有客户端都通过访问服务器来获取所需要的资源






`服务器端逻辑`: 服务器通过`socket()` 创建一个或者多个socket ,并调用`bind()`将其绑定到服务器感兴趣的端口上 , 然后调用`listen()`函数等待客户连接 `connect()` , 服务器需要使用某种I/O模型来监听这一事件 , I/O复用的技术有`select` `poll` `epoll` 系统调用 , 当监听到连接请求后 ,经过三次握手,连接套接字进入 已握完手的队列中 ,  服务器调用`accept()`从握完手的队列中 取出套接字 , 并且分配一个逻辑单元给新的连接, 逻辑单元读取客户请求 处理该请求, 然后将处理结果返回给客户端 , 当服务器接收到 客户端关闭连接请求后,经过四次挥手 , 双方的通信结束 . 在主线程中 , 服务器 只负责监听 其他客户请求 , 不做逻辑处理 
客户端逻辑: 创建一个socket 连接 指定ip地址 和 端口号 , `connect()` 尝试连接 如果连接成功 就往服务器 发送请求 , 然后等待接收服务器的应答 , 最后关闭客户端 .

C/S模型非常适合资源相对集中的场合 , 服务器是通信的中心 , 当访问量过大时 , 客户都将得到很慢的响应 .

#### P2P模型
`P2P`(peer to peer , 点对点)模型 比 C/S模型更符合网络通信的实际情况 , 它使得 网络上所有主机重新回归对等的地位 ,




P2P模型使得每台机器在消耗服务的同时 也给别人提供服务 , 这样资源能够充分自由的共享 ,云计算机群可以看做P2P模型的一个典范，但P2P模型的缺点也很明显 , 当用户之间传输的请求过多时,网络的负载将加重 , 而且 P2P模型存在一个显著的问题 , 即主机之间很难互相发现 , 所以通常会带有一个专门的 发现服务器 ,这个发现服务器通常提供 查找服务 使得客户都能尽快地找到自己需要的资源

















